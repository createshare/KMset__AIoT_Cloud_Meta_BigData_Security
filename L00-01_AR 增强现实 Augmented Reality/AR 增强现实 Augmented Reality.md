# AR 增强现实 Augmented Reality

2014 年，Facebook 以 20 亿美元收购 Oculus。

## 什么是 AR 增强现实

AR 增强现实是一种将虚拟信息与真实世界巧妙融合的技术，广泛运用了多媒体、三维建模、实时跟踪及注册、智能交互、传感等多种技术手段，将计算机生成的文字、图像、三维模型、音乐、视频等虚拟信息模拟仿真后，应用到真实世界中，两种信息互为补充，从而实现对真实世界的“增强”。

AR 超越了移动计算，在空间和认知上架起了虚拟世界和真实世界之间的桥梁。借助 AR，至少在用户的感觉上数字信息似乎已经成为真实世界的一部分。

AR 并不局限于视觉媒体。尽管可以难以实现，听觉、触觉、甚至嗅觉、味觉等也可以用于 AR 中。

AR 必须具有以下三个特征：

- 虚实结合
- 实时交互
- 三维注册

## AR 基本工作原理

完整的 AR 系统，至少需要以下个组件：

- 跟踪组件。需要真实世界模型作为参照，用来确定用户在真实世界中的位置。

- 注册组件。

- 可视化组件。

- 空间模型（即数据库）。存储关于真实世界和虚拟世界的信息。

- - 虚拟世界模型包含用于增强的内容。
  - 空间模型的这两个部分（真实世界和虚拟内容），必须配准在同一坐标系下。

![AR 系统组件](figures/AR 系统组件.jpg)

AR 基本流程：

- 首先通过摄像头和传感器将真实场景进行数据采集，并传入处理器对其进行分析和重构，再通过AR头显或智能移动设备上的摄像头、陀螺仪、传感器等配件实时更新用户在现实环境中的空间位置变化数据，从而得出虚拟场景和真实场景的相对位置，实现坐标系的对齐并进行虚拟场景与现实场景的融合计算，最后将其合成影像呈现给用户。
- 用户可通过AR头显或智能移动设备上的交互配件，如话筒、眼动追踪器、红外感应器、摄像头、传感器等设备采集控制信号，并进行相应的人机交互及信息更新，实现增强现实的交互操作。
- 其中，三维注册是AR技术之核心，即以现实场景中二维或三维物体为标识物，将虚拟信息与现实场景信息进行对位匹配，即虚拟物体的位置、大小、运动路径等与现实环境必须完美匹配，达到虚实相生的地步。



## 增强现实（AR）与 虚拟现实（VR）

虚拟现实（VR）将用户置于一个完全由计算机生成的环境内，而增强现实（AR）旨在呈现直接注册到物理环境的信息。

VR 用户基数较小，移动性较差，具有隔离的沉浸感，因此主要集中在娱乐用途上。VR 是在现实世界之外营造出一个完全虚拟的世界。

与 VR 相比，AR 会触及到更多的人，因为它是对人们日常生活的无缝补充。AR 是将计算机生成的虚拟世界叠加在现实世界上。随着AR技术的成熟，AR越来越多地应用于各个行业，如教育、培训、医疗、设计、广告等。



# AR 关键技术

## 跟踪注册技术

为了实现虚拟信息和真实场景的无缝叠加，这就要求虚拟信息与真实环境在三维空间位置中进行配准注册。

这包括使用者的空间定位跟踪和虚拟物体在真实空间中的定位两个方面的内容。

而移动设备摄像头与虚拟信息的位置需要相对应，这就需要通过跟踪技术来实现。

跟踪注册技术首先检测需要 ‘增强" 的物体特征点以及轮廓，跟踪物体特征点自动生成二维或三维坐标信息。

跟踪注册技术的好坏直接决定着增强现实系统的成功与否。

常用的跟踪注册方法有基于跟踪器的注册、基于机器视觉跟踪注册、基于无线网络的混合跟踪注册技术四种。

## 显示技术

增强现实技术显示系统是比较重要的内容，为了能够得到较为真实的虚拟相结合的系统，使得实际应用便利程度不断提升，使用色彩较为丰富的显示器是其重要基础。

在这一基础上，显示器包含头盔显示器和非头盔显示设备等相关内容，透视式头盔能够为用户提供相关的逆序融合在一起的情境，这些系统在具体操作过程中，操作的原理和虚拟现实领域中的沉浸式头盔等内容之间相似程度比较高级。

其和使用者交互的接口及图像等综合在一起，使用更加真实有效的环境对其实施应用微型摄像机的形式，拍摄外部环境图像，使计算机图像在得到有效处理的时候，可以和虚拟以及真实环境融合在一起，并且两者之间的图像也能够得以叠加。

光学透视头盔显示器可以在这一基础上利用安装在用户眼前的半透半反光学合成器，充分和真实环境综合在一起，真实的场景可以在半透镜的基础上，为用户提供支持，并且满足用户的相关操作需要。

## 虚拟物体生成技术

增强现实技术在应用的时候，其目标是使得虚拟世界的相关内容，在真实世界中得到叠加处理，有效在算法程序的应用基础上，促使物体动感操作有效实现。

当前虚拟物体的生成是在三维建模技术的基础上得以实现的，能够充分体现出虚拟物体的真实感，在对增强现实动感模型研发的过程中，需要能够全方位和集体化对物体对象展示出来。

虚拟物体生成的过程中，自然交互是其中比较重要的技术内容，在具体实施的时候，对现实技术的有效实施有效辅助，使信息注册更好的实现，利用图像标记实时监控外部输入信息内容，使得增强现实信息的操作效率能够提升，并且用户在信息处理的时候，可以有效实现信息内容的加工，提取其中有用的信息内容。

## 交互技术

与在现实生活中不同，增强现实是将虚拟事物在现实中的呈现，而交互就是帮助虚拟事物在现实中更好的呈现做准备，因此想要等到更好的AR体验，交互就是其中的重中之重。

AR设备的交互方式主要分为以下三种：

- 现实世界中的点位选取来进行交互是最为常见的一种交互方式，例如最近流行的AR贺卡和毕业相册就是通过图片位置来进行交互的。 
- 将空间中的一个或多个事物的特定姿势或者状态加以判断，这些姿势都对应着不同的命令。使用者可以任意改变和使用命令来进行交互，比如用不同的手势表示不同的指令。
- 使用特制工具进行交互。比如谷歌地球，它就是利用类似于鼠标一样的东西来进行一系列的操作，从而满足用户对于AR互动的要求。

## 合并技术

增强现实的目标是将虚拟信息与输入的现实场景无缝结合在一起，为了增加AR使用者的现实体验，要求AR具有很强真实感。

为了达到这个目标不单单只考虑虚拟事物的定位，还需要考虑虚拟事物与真实事物之间的遮挡关系以及具备四个条件：几何一致、模型真实、光照一致和色调一致，这四者缺一不可，任何一种的缺失都会导致AR效果的不稳定，从而严重影响AR的体验。



# AR 的增强方法（显示）

基于人类视觉系统的特性和增强现实应用的目标，可以得出增强现实显示装置的需求。包括以下几种方式：

## 光学透视式（OST）显示

通常通过半反半透光学元件来实现虚实结合。

这类光学元件的一个简单示例是半镀银镜，该银镜可以让足够多来自真实世界的光线通过。
因此可以直接观察到真实世界。
同时，显示计算机生成虚拟图像的显示器被放置在头顶或银镜的一侧，从而可以反射虚拟图像并叠加到真实世界上。

![光学透视式（OST）显示](figures/光学透视式（OST）显示.jpg)



## 视频透视式（VST）显示

通过电子的方式进行虚实融合。
这类显示通过摄像机拍摄真实世界的数字视频图像并传输到图形处理器，图形处理器将视频图像与计算机生成的图像进行结合。
通常只需将视频图像复制到帧缓冲区作为背景图像，再在上面绘制计算机生成的图像。
可以通过传统的观看装置呈现组合的图像。

![光学透视式（OST）显示](figures/视频透视式（VST）显示.jpg)

## 单视和体视

众所周知的是，利用立体摄像机输人提供三维空间的逼真感受是非常困难的。

伴随着近眼显示器透视式增强现实显示技术，出现了单视和体视的问题。在应用近眼显示器时，可以通过单目或双目方式构建增强现实。
如果物理世界是借助某种光学透镜进行观察或通过摄像机进行介导的，那么将出现两个有关场景维度的问题：是否保持了真实世界的三维度？是否利用双目视觉通过立体视觉的方式展示增强效果？

- 单目头戴式显示器
  - 单目头戴式显示器仅为一只眼睛呈现图像。
  - 单目显示器可用于增强现实，但由于缺乏沉浸感，这种方法不太受欢迎。
- 双目显示器
  - 双目显示器为双眼显示相同的图像，仅提供了单视的效果。
  - 这种方法有时也被用于视频透视式（VST)头戴式显示器，由于只需要一个单独的摄像机流，因此最小化了感知和处理的要求。
- 双目头戴式显示器
  - 双目头戴式显示器为每只眼睛提供了一幅单独的图像，能够产生立体效果。一套带有两台与眼睛光轴对齐的摄像机的视频透视式显示器，可以产生让用户立体感知的物理世界图像。
  - 显然在这些选项中，双目显示器提供了最高质量的增强现实，但技术成本显著增加。
  - 双目头戴式显示器需要两个显示元件，或者是一个可以使用两个光学元件进行适当分割的宽幅单显示器。
  - 可以通过在一个显示单摄像机获取的真实背景的双目镜显示上进行渲染来实现立体增强（如，手机摄像头）。
  - 但全立体视频透视至少需要两台摄像机的视频输人来提供一个类似于人类双眼的视角。
  - 为了同时传送图像，成对的摄像机和显示器必须保持同步。

![基于立体功能的透视式显示器分类](figures/基于立体功能的透视式显示器分类.jpg)

## 空间投影显示（空间增强现实）

当增强内容是被投影到实际的物理几何体上（作为虚拟的占位符对象或现实世界中的自然部分）时，称为空间增强现实、基于投影的增强现实或空间投影。

在空间投影中，增强现实显示的虚拟部分是由投影装置产生的，该类显示装置不需要使用特殊的屏幕，而是直接将虚拟图像投影到真实世界的物体上。
这类显示装置也是光学组合的一种形式，但是既不需要单独的光学合成器，也不需要电子屏幕。

![空间投影显示（空间增强现实）](figures/空间投影显示（空间增强现实）.jpg)

头戴式投影仪、可移动投影仪（加装跟踪云台）。

## 手持式显示

智能手机和平板电脑等手持式显示器。
